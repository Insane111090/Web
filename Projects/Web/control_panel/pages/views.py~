# Create your views here.
from django.shortcuts import render
from datetime import datetime
from library.models import Book, Author
import os

def home(request):
	context={'ts':datetime.now()}
	return render(request,'home.html',context)

def listing(request,direct):
	dir=[]
	fl=[]
	direct='/home/'+direct
	for dN,d,f in os.walk(direct):
		if dN == direct:
			os.chdir(direct)
			for i in f:
				fl.append({"name":i,"size":os.path.getsize(i),"modified":datetime.fromtimestamp(int(os.path.getmtime(i))),})
			dir = d
	context={'dir_content':dir,'file_content':fl}
	return render(request,'listing.html',context)

def books_list(request,dr):
	list=Book.objects.all()
	context={'book':list}
	return render(request,'bookslist.html',context)

def book_info(request,dr):
	context={'bookinf':Book.objects.filter(id=dr[0:1]).order_by('id'),}
	return render(request,'bookinfo.html',context)	


def author(request,dr):
	context={'author':Author.objects.all()}
	return render(request,'bookinfo.html',context)
